

XPath расшифровывается как XML Path Language — «язык путей к XML». Фактически, с помощью 
этого языка описывают путь, по которому можно добраться до какого-то участка разметки. 
Запрос находит по описанному пути нужные элементы, возвращает их или преобразует.
XPath помогает:
-> быстро переходить к нужному элементу страницы или XML-документа;
-> находить элементы по параметрам и свойствам;
-> работать с форматом XSLT, который используется для трансформации XML;
-> искать элементы в HTML, то есть в верстке веб-страницы;
-> создавать выборки из содержимого документа по определенным критериям.

Тестировщики используют XPath, чтобы быстро переходить по участкам страницы и находить на ней нужные элементы.

В XPath используются символы /, // а также теги.
/ означает прямого потомка (например, h1/h2), аналогичен символу > в CSS-селекторах;
// означает потомка любо степени вложенности (например, h1//h2).

------------ Абсолютный и относительный путь ------------
Абсолютный путь xpath начинается с одного слэша ( / ) и указывает на полный путь из корневого узла (root) к целевому (target). Например, следующее выражение в XPath:

  /html/body/div[1]/h1 

— означает: «выбрать первый div-элемент под body-элементом под html-элементом, и далее выбрать его вложенный (или дочерний, child) h1-элемент».

Относительный путь начинается с дабл-слэша (двух //) и указывает на путь из любого узла 
( = нода ), который отвечает критериям, к целевому узлу. Например,

  //div[@id='main'] 

— означает «выбрать любой div-элемент, имеющий id-атрибут со значением 'main'».

----- ПРИМЕРЫ: -----
Найдём тег nav, который вложен в тег header:
//header/nav

Найдём тег div, который вложен в тег nav, который вложен в тег header:
//header/nav/div

Но мы также можем найти этот элемент div, используя другой синтаксис. 
Двойной слэш // означает поиск на любом уровне вложенности, поэтому мы можем записать так:
//header//div


--------- Поиск элементов по порядковому номеру --------
А что если нам нужен какой-то определённый тег div, если их там несколько (к примеру, 10)?
Давайте найдём 5-й элемент div. В таком случае мы можем записать так:
(//header//div)[5]    (лучше оборачивать в скобки первую часть выражения)


--------- Поиск элементов по атрибуту --------
Найдём элемент input, у которого есть атрибут type со значением email:
//input[@type="email"]

Этот же input мы можем найти и по любому другому атрибуту (которые у него есть). Например:
//input[@placeholder="E-mail"]


--------- Поиск элементов по параметру text --------
Найдём кнопку, у которой текст "Sign in" :
//button[@text()="Sign in"]

Если у нас таких кнопок на странице несколько, то можно добавить порядковый номер:
(//button[@text()="Sign in"])[1]

Примечание: при поиске по параметру text символ @ не нужно ставить!


--------- Поиск элементов по содержимому артибута --------
Часто бывает, что у элемента может быть несколько классов, а нам нужно найти по какому-то конкретному.
Для таких случаев используется contains:
//button[contains(@class, "btn")]


--------- Поиск элементов по нескольким атрибутам одновременно --------



--------- Логические операторы --------
В XPath широко применяются логические операторы типа AND, OR и NOT, для указания нескольких 
условий поиска и сочетания условий.
Синтаксис:
//tag[condition1]
//tag[condition1 and condition2]
//tag[condition1 or condition2]
//tag[(condition1 or condition2) and condition 3]

Например, мы можем найти элемент, который сожержит несколько атрибутов одновременно с помощью оператора AND.

//input[@type='text' AND @name='username'] -
Означает «выбрать любой input-элемент, имеющий одновременно атрибут type со значением ‘text’ 
и атрибут name со значением ‘username’».

Или, например, найдём кнопку, у которой есть два класса с определёнными значениями:
//button[@data-cy="submitButton" AND @type="submit"] -
Означает «выбрать любой button-элемент, имеющий одновременно атрибут data-cy со значением 'submitButton' и атрибут type со значением ‘submit’»

//a[@href='https://testengineer.ru' OR @class='link'] -
Означает «выбрать любой элемент a (anchor), имеющий или href-атрибут со значением ’https://testengineer.ru’», или атрибут class со значением ‘link’».

//div[NOT(@id)] -
Означает «выбрать любой div-элемент, не имеющий id-атрибута».

-------------- Функции -------------
Также в XPath применяются функции типа text(), contains(), starts-with() и ends-with() для проверки точного или частичного совпадения текста (текстовых значений).

